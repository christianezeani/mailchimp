<?php
namespace MailChimp\Core;

use MailChimp\Interfaces\ModelInterface;

/**
 * Base Model
 */
class Model extends Data implements ModelInterface {

  /**
   * API Endpoint
   * 
   * @var string
   */
  protected $path = '/';

  /**
   * Methods Allowed
   * 
   * @var array
   */
  protected $methods = [
    'create',
    'update',
    'delete',
    'get',
    'first'
  ];

  /**
   * Request Fields Configurations
   * 
   * @var array
   */
  protected $map = [];

  /**
   * API Query builder
   * 
   * @var Builder
   */
  private $builder;

  function __construct($data=NULL) {
    parent::__construct($data);
    $this->builder = new Builder($this);
  }

  /**
   * Return API Path
   * 
   * @return string
   */
  public function getPath() {
    return $this->path;
  }

  /**
   * Returns all allowed methods
   * 
   * @return string[]
   */
  function getMethods() {
    return $this->methods;
  }

  /**
   * Get Model Fields
   * 
   * @return array
   */
  function modelFields() {
    return $this->fields;
  }

  public function clear() {
    $this->builder->clear();
    parent::clear();
  }

  public function __call($name, $arguments) {
    return $this->builder->{$name}(...$arguments);
  }

}

